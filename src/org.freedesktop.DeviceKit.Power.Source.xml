<!DOCTYPE node PUBLIC
"-//freedesktop//DTD D-BUS Object Introspection 1.0//EN"
"http://www.freedesktop.org/standards/dbus/1.0/introspect.dtd" [
  <!ENTITY ERROR_GENERAL "org.freedesktop.DeviceKit.Power.Source.GeneralError">
]>
<node name="/" xmlns:doc="http://www.freedesktop.org/dbus/1.0/doc.dtd">
  <interface name="org.freedesktop.DeviceKit.Power.Source">
    <doc:doc>
      <doc:description>
        <doc:para>
          TODO: some explanatory text etc. etc. Mention that we
          collect history to provide more precise values of
          battery-time-to-empty, battery-time-to-full. Go into detail
          with the algorithms.
        </doc:para>
        <doc:para>
          Unless otherwise noted, an empty string or the value 0 in a
          property means not set.
        </doc:para>
      </doc:description>
    </doc:doc>


    <!-- ************************************************************ -->
    <method name="Refresh">
      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
      <doc:doc>
        <doc:description>
          <doc:para>
            Refreshes the data collected from the power source.
          </doc:para>
        </doc:description>
        <doc:permission>Callers need the org.freedesktop.devicekit.power.refresh-power-source authorization</doc:permission>
        <doc:errors>
          <doc:error name="&ERROR_GENERAL;">if an error occured while refreshing</doc:error>
        </doc:errors>
      </doc:doc>
    </method>

    <!-- ************************************************************ -->
    <signal name="Changed">
      <doc:doc>
        <doc:description>
          <doc:para>
            Some value on the power source changed.
          </doc:para>
        </doc:description>
      </doc:doc>
    </signal>

    <!-- ************************************************************ -->
    <method name="GetStatistics">
      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
      <arg name="type" direction="in" type="s">
        <doc:doc><doc:summary>The type of statistics.
        Valid types are <literal>rate</literal> or <literal>charge</literal>.</doc:summary></doc:doc>
      </arg>
      <arg name="timespan" direction="in" type="u">
        <doc:doc><doc:summary>The amount of data to return in seconds, or 0 for all.</doc:summary></doc:doc>
      </arg>
      <arg name="data" direction="out" type="a(uds)">
        <doc:doc><doc:summary>The data for the power device.</doc:summary></doc:doc>
      </arg>
      <doc:doc>
        <doc:description>
          <doc:para>
            Gets statistics for the power device that may be interesting
            to show on a graph in the session.
          </doc:para>
        </doc:description>
      </doc:doc>
    </method>

    <!-- ************************************************************ -->
    <property name="native-path" type="s" access="read">
      <doc:doc><doc:description><doc:para>
            OS specific native path of the power source. On Linux this
            is the sysfs path, for
            example <doc:tt>/sys/devices/LNXSYSTM:00/device:00/PNP0C0A:00/power_supply/BAT0</doc:tt>. Is
            blank if the device is being driven by a user space
            driver.
      </doc:para></doc:description></doc:doc>
    </property>

    <property name="vendor" type="s" access="read">
      <doc:doc><doc:description><doc:para>
            Name of the vendor of the battery.
      </doc:para></doc:description></doc:doc>
    </property>

    <property name="model" type="s" access="read">
      <doc:doc><doc:description><doc:para>
            Name of the model of this battery.
      </doc:para></doc:description></doc:doc>
    </property>

    <property name="serial" type="s" access="read">
      <doc:doc><doc:description><doc:para>
            Unique serial number of the battery.
      </doc:para></doc:description></doc:doc>
    </property>

    <property name="update-time" type="t" access="read">
      <doc:doc><doc:description><doc:para>
            The point in time (seconds since the Epoch Jan 1, 1970
            0:00 UTC) that data was read from the power source.
      </doc:para></doc:description></doc:doc>
    </property>

    <property name="type" type="s" access="read">
      <doc:doc><doc:description><doc:para>
            Type of power source. Known values are "battery" and "line-power".
      </doc:para></doc:description></doc:doc>
    </property>

    <property name="power-supply" type="b" access="read">
      <doc:doc><doc:description><doc:para>
            If the power device is used to supply the system.
            This would be set TRUE for laptop batteries and UPS devices,
            but set FALSE for wireless mice or PDAs.
          </doc:para></doc:description></doc:doc>
    </property>

    <property name="line-power-online" type="b" access="read">
      <doc:doc><doc:description><doc:para>
            Whether power is currently being provided through line power.
            This property is only valid if the property
            <doc:ref type="property" to="Source:type">type</doc:ref>
            has the value "line-power".
      </doc:para></doc:description></doc:doc>
    </property>

    <property name="battery-energy" type="d" access="read">
      <doc:doc><doc:description><doc:para>
            Amount of energy (measured in Wh) currently available in
            the power source.
          </doc:para><doc:para>
            This property is only valid if the property
            <doc:ref type="property" to="Source:type">type</doc:ref>
            has the value "battery".
      </doc:para></doc:description></doc:doc>
    </property>

    <property name="battery-energy-empty" type="d" access="read">
      <doc:doc><doc:description><doc:para>
            Amount of energy (measured in Wh) in the power source when
            it's considered to be empty.
          </doc:para><doc:para>
            This property is only valid if the property
            <doc:ref type="property" to="Source:type">type</doc:ref>
            has the value "battery".
      </doc:para></doc:description></doc:doc>
    </property>

    <property name="battery-energy-full" type="d" access="read">
      <doc:doc><doc:description><doc:para>
            Amount of energy (measured in Wh) in the power source when
            it's considered full.
          </doc:para><doc:para>
            This property is only valid if the property
            <doc:ref type="property" to="Source:type">type</doc:ref>
            has the value "battery".
      </doc:para></doc:description></doc:doc>
    </property>

    <property name="battery-energy-full-design" type="d" access="read">
      <doc:doc><doc:description><doc:para>
            Amount of energy (measured in Wh) the power source is
            designed to hold when it's considered full.
          </doc:para><doc:para>
            This property is only valid if the property
            <doc:ref type="property" to="Source:type">type</doc:ref>
            has the value "battery".
      </doc:para></doc:description></doc:doc>
    </property>

    <property name="battery-energy-rate" type="d" access="read">
      <doc:doc><doc:description><doc:para>
            Amount of energy being drained from the source, measured
            in W. If positive, the source is being discharged, if
            negative it's being charged.
          </doc:para><doc:para>
            This property is only valid if the property
            <doc:ref type="property" to="Source:type">type</doc:ref>
            has the value "battery".
      </doc:para></doc:description></doc:doc>
    </property>

    <property name="battery-time-to-empty" type="x" access="read">
      <doc:doc><doc:description><doc:para>
            Number of seconds until the power source is considered empty.
            Is set to -1 if unknown.
          </doc:para><doc:para>
            This property is only valid if the property
            <doc:ref type="property" to="Source:type">type</doc:ref>
            has the value "battery".
      </doc:para></doc:description></doc:doc>
    </property>

    <property name="battery-time-to-full" type="x" access="read">
      <doc:doc><doc:description><doc:para>
            Number of seconds until the power source is considered full.
            Is set to -1 if unknown.
          </doc:para><doc:para>
            This property is only valid if the property
            <doc:ref type="property" to="Source:type">type</doc:ref>
            has the value "battery".
      </doc:para></doc:description></doc:doc>
    </property>

    <property name="battery-percentage" type="d" access="read">
      <doc:doc><doc:description><doc:para>
            The amount of energy left in the power source expressed as
            a percentage between 0 and 100. Typically this is the same as
            (<doc:ref type="property" to="Source:battery-energy">battery-energy</doc:ref> -
            <doc:ref type="property" to="Source:battery-energy-empty">battery-energy-empty</doc:ref>) /
            (<doc:ref type="property" to="Source:battery-energy-full">battery-energy-full</doc:ref> -
            <doc:ref type="property" to="Source:battery-energy-empty">battery-energy-empty</doc:ref>).
            However, some primitive power sources are capable of only
            reporting percentages and in this case the battery-energy-*
            properties will be unset while this property is set.
          </doc:para><doc:para>
            This property is only valid if the property
            <doc:ref type="property" to="Source:type">type</doc:ref>
            has the value "battery".
      </doc:para></doc:description></doc:doc>
    </property>

    <property name="battery-is-present" type="b" access="read">
      <doc:doc><doc:description><doc:para>
            If the power source is present in the bay.
            This field is required as some batteries are hot-removable, for example
            expensive UPS and most laptop batteries.
          </doc:para><doc:para>
            This property is only valid if the property
            <doc:ref type="property" to="Source:type">type</doc:ref>
            has the value "battery".
      </doc:para></doc:description></doc:doc>
    </property>

    <property name="battery-state" type="s" access="read">
      <doc:doc><doc:description><doc:para>
            The battery power state.
            Known values are "fully-charged", "empty", "charging",
            "discharging" or "unknown".
          </doc:para><doc:para>
            This property is only valid if the property
            <doc:ref type="property" to="Source:type">type</doc:ref>
            has the value "battery".
      </doc:para></doc:description></doc:doc>
    </property>

    <property name="battery-is-rechargeable" type="b" access="read">
      <doc:doc><doc:description><doc:para>
            If the power source is rechargeable.
          </doc:para><doc:para>
            This property is only valid if the property
            <doc:ref type="property" to="Source:type">type</doc:ref>
            has the value "battery".
      </doc:para></doc:description></doc:doc>
    </property>

    <property name="battery-capacity" type="d" access="read">
      <doc:doc><doc:description><doc:para>
            The capacity of the power source expressed as a percentage between 0 and 100.
            The capacity of the battery will reduce with age.
            A capacity value less than 75% is usually a sign that you should renew your battery.
            Typically this value is the same as
            (<doc:ref type="property" to="Source:battery-full-design">battery-full-design</doc:ref> /
            <doc:ref type="property" to="Source:battery-full">battery-full</doc:ref>) * 100.
            However, some primitive power sources are not capable reporting capacity
            and in this case the battery-capacity property will be unset.
          </doc:para><doc:para>
            This property is only valid if the property
            <doc:ref type="property" to="Source:type">type</doc:ref>
            has the value "battery".
      </doc:para></doc:description></doc:doc>
    </property>

    <property name="battery-technology" type="s" access="read">
      <doc:doc><doc:description><doc:para>
            Technology used in the battery; known values are "lithium-ion", "lead-acid",
            "lithium-polymer", "nickel-metal-hydride", "lithium-iron-phosphate" or "unknown".
          </doc:para><doc:para>
            This property is only valid if the property
            <doc:ref type="property" to="Source:type">type</doc:ref>
            has the value "battery".
      </doc:para></doc:description></doc:doc>
    </property>

  </interface>

</node>
